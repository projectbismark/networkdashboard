{% extends "base.html" %}
{% block content %}

<div class="content" style="width: 850px">
    <h1>{{detail.name}}</h1>

        <div id="section_text_2">
            {% if detail.is_default %}
            <div class="alert alert-block">
                <a class="close" data-dismiss="alert">Ã—</a>
                <h4 class="alert-heading">Welcome, new Dashboard user!</h4>
                We don't have any information about your router or ISP.
                Please click the Edit button below to fill in your details.
            </div>
            {% endif %}

            <table class="table table-striped table-condensed">
                <tr>
                    <td>ISP</td>
                    <td>{{detail.isp}}</td>
                </tr>
                <tr>
                    <td>Location</td>
                    <td id="location_column">
                        <script type="text/javascript">
                        $.ajax({
                            type: "GET",
                            url: escape("/getLocation/{{deviceid}}/"),
                            success: function(data) {
                                document.getElementById('location_column').innerHTML = data;
                            }
                        });
                        </script>
                    </td>
                </tr>     
                <tr>
                    <td>Service Plan</td>
                    <td>{{detail.serviceplan}}</td>
                </tr>
                <tr>
                    <td>Download Rate</td>
                    <td>{{detail.downloadrate}} kbps</td>
                </tr>
                <tr>
                    <td>Upload Rate</td>
                    <td>{{detail.uploadrate}} kbps</td>
                </tr>
                <tr>
                    <td>First Measurement</td>
                    <td>{{firstUpdate}}</td>
                </tr>
                <tr>
                    <td>Last Measurement</td>
                    <td>{{lastUpdate}}</td>
                </tr>
            </table>
            <a style="float: right" class="btn" href="/editDevicePage/{{detail.hashkey}}"><i class="icon-pencil"></i> Edit device details</a></h1>
                {% comment %}<a class="btn btn-primary btn-large" href="http://projectbismark.net/data/{{ deviceid }}"><b>Download</b></a>{% endcomment %}

            <form class="form-inline" style="float: left">
            <label class="control-label" for="device_url">This page's URL:</label>
            <input class="input-xlarge" readonly="readonly" id="device_url" type="text" value="http://networkdashboard.org/displayDevice/{{detail.hashkey}}"/>
            </form>
        </div>

    <ul id="tab" class="nav nav-tabs" style="clear: both">
        <li class="active"><a href="#download_throughput" data-toggle="tab">Download Throughput</a></li>
        <li><a href="#upload_throughput" data-toggle="tab">Upload Throughput</a></li>
        <li><a href="#round_trip_latency" data-toggle="tab">Round Trip Latency</a></li>
        <li><a href="#last_mile_latency" data-toggle="tab">Last Mile Latency</a></li>
    </ul>
    <div class="tab-content">
        <div class="tab-pane active in" id="download_throughput">
            <div class="graphdiv" id="graph_div_1">
                <div class="progress_wrapper">
                    <div class="progress progress-info progress-striped active">
                        <div class="bar" style="width: 100%"></div>
                    </div>
                </div>
            </div>
        </div>
        <div class="tab-pane" id="upload_throughput"> 
            <div class="graphdiv" id="graph_div_2">
                <div class="progress_wrapper">
                    <div class="progress progress-info progress-striped active">
                        <div class="bar" style="width: 100%"></div>
                    </div>
                </div>
            </div>
        </div>
        <div class="tab-pane" id="round_trip_latency">
            <div class="graphdiv" id="graph_div_3">
                <div class="progress_wrapper">
                    <div class="progress progress-info progress-striped active">
                        <div class="bar" style="width: 100%"></div>
                    </div>
                </div>
            </div>
        </div>
        <div class="tab-pane" id="last_mile_latency">  
            <div class="graphdiv" id="graph_div_4">
                <div class="progress_wrapper">
                    <div class="progress progress-info progress-striped active">
                        <div class="bar" style="width: 100%"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script type="text/javascript">
    $('download_throughput').tab('show');

    renderGraphs("{{deviceid}}");
	hashid="{{ detail.hashkey }}";
	setHashid(hashid);
	
</script>
{% endblock %}
